<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Text AI Adventure</title>
  <style>
    body {
      background: black;
      color: limegreen;
      font-family: monospace;
      padding: 20px;
    }
    #output {
      white-space: pre-wrap;
      margin-bottom: 20px;
      height: 400px;
      overflow-y: auto;
    }
    input {
      background: black;
      color: limegreen;
      border: 1px solid limegreen;
      padding: 10px;
      width: 100%;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div id="output"></div>
  <input id="input" type="text" placeholder=">> Your move..." autocomplete="off" />
  <script>
    const outputDiv = document.getElementById("output");
    const inputField = document.getElementById("input");

    // API Call to OpenAI (You'll need to set up your OpenAI API key)
    async function generateStoryContinuation(userInput) {
      const apiKey = "YOUR_OPENAI_API_KEY";  // Replace with your OpenAI API key

      try {
        const response = await fetch('https://api.openai.com/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",  // Use the appropriate model, like gpt-3.5-turbo or gpt-4
            messages: [
              { role: "system", content: "You are a storyteller. Continue the story based on the user's input." },
              { role: "user", content: userInput }
            ],
            max_tokens: 150,
            temperature: 0.7
          })
        });

        const data = await response.json();
        return data.choices[0].message.content.trim();
      } catch (error) {
        console.error('Error:', error);
        return "Sorry, there was an error with generating the story.";
      }
    }

    // Display the initial random story
    const storyStarts = [
      "You wake up in the woods.",
      "You find yourself standing at the edge of a cliff.",
      "A dense fog surrounds you as you step into the cave.",
      "You're on a boat in the middle of a vast ocean."
    ];
    outputDiv.textContent = getRandomStoryStart();

    function getRandomStoryStart() {
      const randomIndex = Math.floor(Math.random() * storyStarts.length);
      return storyStarts[randomIndex];
    }

    // Handle user input and story generation
    inputField.addEventListener("keydown", async function (event) {
      if (event.key === "Enter") {
        const userInput = event.target.value;

        if (userInput.trim()) {
          // Display user input in the output
          outputDiv.textContent += `\n>> ${userInput}`;

          // Generate AI story continuation based on the user input
          const aiResponse = await generateStoryContinuation(userInput);
          outputDiv.textContent += `\nAI: ${aiResponse}`;

          // Clear the input field and scroll to the bottom
          event.target.value = '';
          outputDiv.scrollTop = outputDiv.scrollHeight;
        }
      }
    });
  </script>
</body>
</html>

